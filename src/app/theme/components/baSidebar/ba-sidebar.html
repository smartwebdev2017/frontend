<script>
    function onChangedYear(data){
        var scope = angular.element("#year_value").scope();
        console.log(scope);
        scope.year_value = (data.value).replace(';','-');
        scope.filter_car(scope.model,scope.title, scope.city_selected, scope.state_selected, scope.price_value, scope.mileage_value, scope.year_value, scope.description);
    };
    function onChangedMileage(data){
        var scope = angular.element("#mileage_value").scope();
        scope.mileage_value = (data.value).replace(';','-');
        console.log(scope);
        scope.filter_car(scope.model,scope.title, scope.city_selected, scope.state_selected, scope.price_value, scope.mileage_value, scope.year_value, scope.description);
    };
    function onChangedPrice(data){
        var scope = angular.element("#price_value").scope();
        scope.price_value = (data.value).replace(';','-');
        scope.filter_car(scope.model,scope.title, scope.city_selected, scope.state_selected, scope.price_value, scope.mileage_value, scope.year_value, scope.description);
    };
</script>
<aside ng-if="!$isLogged" class="al-sidebar">

    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input ng-model="title" ng-change="filter_car(model,title, selectpickerVm.groupedByCities.selected['name'], selectpickerVm.groupedByStates.selected['name'], price_value, mileage_value, year_value, description)" placeholder="Title" class="form-control" type="text"/>
            </div>
            <input id="year_value" type="hidden" ng-model="year_value" />
            <input id="mileage_value" type="hidden" ng-model="mileage_value"  />
            <input id="price_value" type="hidden" ng-model="price_value" />
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input  ng-model="model"  ng-change="filter_car(model,title, selectpickerVm.groupedByCities.selected['name'], selectpickerVm.groupedByStates.selected['name'], price_value, mileage_value, year_value, description)" placeholder="Model" class="form-control" type="search"/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input  ng-model="description"  ng-change="filter_car(model,title, selectpickerVm.groupedByCities.selected['name'], selectpickerVm.groupedByStates.selected['name'], price_value, mileage_value, year_value, description)"  placeholder="Search Description" class="form-control" type="search"/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">

            <div class="slider-box">
                <h5>Year</h5>
                <ion-slider ng-model='year' type="double"
                            grid="true"
                            min="1955"
                            max="2019"
                            from="1955"
                            to = "year_to"
                            step="1"
                            prettify-separator="-"
                            prettify="true"
                            onChange="onChangedYear(event.target)"
                            disable="false">
                </ion-slider>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="slider-box">
                <h5>Mileage</h5>
                <ion-slider type="double"
                            grid="true"
                            min="0"
                            max="198000"
                            from="500"
                            step="1000"
                            prettify-separator="."
                            prettify="true"
                            onChange="onChangedMileage(event.target)"
                            disable="false">
                </ion-slider>
            </div>
        </div></div>

    <div class="row">
        <div class="col-sm-12">
            <div class="slider-box">
                <h5>Price</h5>
                <ion-slider type="double"
                            grid="true"
                            min="0"
                            max="100000"
                            from="10000"
                            step="1000"
                            prettify-separator="."
                            prettify="true"
                            onChange="onChangedPrice(event.target)"
                            disable="false" onchange="">
                </ion-slider>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <select name="city" id="city" ng-model="city_selected" ng-change="filter_car(model,title, city_selected, state_select, price_value, mileage_value, year_value, description)">
                    <option>Select City</option>
                    <option ng-repeat="option in city" value="{{option.name}}">{{option.name}}</option>
                </select>
            </div>
        </div></div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <select name="state" id="state" ng-model="state_selected" ng-change="filter_car(model,title, city_selected, state_select, price_value, mileage_value, year_value, description)">
                    <option value="empty">Select State</option>
                    <!--<option ng-repeat="option in state" value="{{option.name}}">{{option.name}}</option>-->
                </select>
            </div>
        </div>
    </div>


</aside>
