<script>
    function onChangedYear(data){
        var scope = angular.element("#year_value").scope();
        console.log(scope);
        scope.year_value = (data.value).replace(';','-');
        scope.filter_car();
        //scope.filter_car(scope.model,scope.title, scope.city_selected, scope.state_selected, scope.price_value, scope.mileage_value, scope.year_value, scope.description);
    };
    function onChangedMileage(data){
        var scope = angular.element("#mileage_value").scope();
        scope.mileage_value = (data.value).replace(';','-');
        console.log(scope);
        scope.filter_car();
    };
    function onChangedPrice(data){
        var scope = angular.element("#price_value").scope();
        scope.price_value = (data.value).replace(';','-');
        scope.filter_car();
    };
</script>
<aside ng-if="!$isLogged" class="al-sidebar">

    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input ng-model="filter.title" placeholder="Title" class="form-control" type="text"/>
            </div>
            <input id="year_value" type="hidden" ng-model="year_value" />
            <input id="mileage_value" type="hidden" ng-model="mileage_value"  />
            <input id="price_value" type="hidden" ng-model="price_value" />
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input  ng-model="filter.model"  placeholder="Model" class="form-control" type="search"/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <input  ng-model="filter.description"  ng-change="filter_car()"  placeholder="Search Description" class="form-control" type="search"/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label>Year</label>
            <div class="slider">
                <div nouislider ng-from="filter.year_from" ng-to="filter.year_to" start='{{filterOptions.year.start}}' end='{{filterOptions.year.end}}' step='{{filterOptions.year.step}}'></div>
            </div>
            <span class="year-from ">{{filter.year_from}}</span>
            <span class="year-to">{{filter.year_to}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label>Mileage</label>
            <div class="slider">
                <div nouislider ng-from="filter.mileage_from" ng-to="filter.mileage_to" start='{{filterOptions.mileage.start}}' end='{{filterOptions.mileage.end}}' step='{{filterOptions.mileage.step}}' callback="change"></div>
            </div>
            <span class="year-from">{{filter.mileage_from}}</span>
            <span class="year-to">{{filter.mileage_to}}</span>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <label>Price</label>
            <div class="slider">
                <div nouislider ng-from="filter.price_from" ng-to="filter.price_to" start='{{filterOptions.price.start}}' end='{{filterOptions.price.end}}' step='{{filterOptions.price.step}}' callback="change"></div>
            </div>
            <span class="year-from">${{filter.price_from}}</span>
            <span class="year-to">${{filter.price_to}}</span>
        </div>
    </div>
    <div class="row">
       <div class="form-group">
        <ui-select ng-model="filter.city"
                   class="btn-group bootstrap-select form-control"
                   ng-disabled="false"
                   append-to-body="true"
                   search-enabled="false">
          <ui-select-match placeholder="Select City">
            <span> {{$select.selected.label}}</span>
          </ui-select-match>
          <ui-select-choices repeat="city in cities">
            <span ng-bind-html="city.label"></span>
          </ui-select-choices>
        </ui-select>
      </div>


       <div class="form-group">
        <ui-select ng-model="filter.state"
                   class="btn-group bootstrap-select form-control"
                   ng-disabled="false"
                   append-to-body="true"
                   search-enabled="false">
          <ui-select-match placeholder="Select State">
            <span> {{$select.selected.label}}</span>
          </ui-select-match>
          <ui-select-choices repeat="state in states">
            <span ng-bind-html="state.label"></span>
          </ui-select-choices>
        </ui-select>
      </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.longhood">
          <span>Longhood</span>
        </label>
      </div>
    </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.widebody">
          <span>Widebody</span>
        </label>
      </div>
    </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.pts">
          <span>PTS</span>
        </label>
      </div>
    </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.pccb">
          <span>PCCB</span>
        </label>
      </div>
    </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.aircooled">
          <span>Air-cooled</span>
        </label>
      </div>
    </div>

    <div class="has-success">
      <div class="checkbox">
        <label class="custom-checkbox">
          <input type="checkbox" ng-model="filter.lwb">
          <span>LWB Seats</span>
        </label>
      </div>
    </div>

  <div class="form-group">
    <ui-select ng-model="filter.model_number"
               class="btn-group bootstrap-select form-control"
               ng-disabled="false"
               append-to-body="true"
               search-enabled="false">
      <ui-select-match placeholder="Select VIN Model Number">
        <span> {{$select.selected.label}}</span>
      </ui-select-match>
      <ui-select-choices repeat="m in model_numbers">
        <span ng-bind-html="m.label"></span>
      </ui-select-choices>
    </ui-select>
  </div>

  <div class="form-group">
    <ui-select ng-model="BaSidebarCtrl.selectedItem.selected"
               class="btn-group bootstrap-select form-control"
               ng-disabled="false"
               append-to-body="true"
               search-enabled="false">
      <ui-select-match placeholder="Select Transmission">
        <span> {{$select.selected.label}}</span>
      </ui-select-match>
      <ui-select-choices repeat="transmission in vm.transmissions">
        <span ng-bind-html="transmission.label"></span>
      </ui-select-choices>
    </ui-select>
  </div>


</aside>
